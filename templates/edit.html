{{define "editgp"}}
<html lang="uk-UA">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
    <script src="/assets/jquery-3.6.0.min.js"></script>
    <link href="/assets/bootstrap/css/bootstrap.css" rel="stylesheet">
    <script src="/assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <link href="/assets/fontawesome/css/all.css" rel="stylesheet">
    <link href="/assets/gpo.css" rel="stylesheet">
    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
            var actions = $("table td:last-child").html();
            // Append table with add row form on add new button click
            $(".add-new").click(function(){
                $(this).attr("disabled", "disabled");
                var index = $("table tbody tr:last-child").index();
                var row = '<tr>' +
                    '<td><input type="text" class="form-control" name="name" id="name"></td>' +
                    '<td><input type="text" class="form-control" name="value" id="value"></td>' +
                    '<td>' + actions + '</td>' +
                    '</tr>';
                $("table").append(row);
                $("table tbody tr").eq(index + 1).find(".add, .edit").toggle();
                $('[data-toggle="tooltip"]').tooltip();
            });
            // Add row on add button click
            $(document).on("click", ".add", function(){
                var empty = false;
                var input = $(this).parents("tr").find('input[type="text"]');
                input.each(function(){
                    if(!$(this).val()){
                        $(this).addClass("error");
                        empty = true;
                    } else{
                        $(this).removeClass("error");
                    }
                });
                $(this).parents("tr").find(".error").first().focus();
                if(!empty){
                    input.each(function(){
                        $(this).parent("td").html($(this).val());
                    });
                    $(this).parents("tr").find(".add, .edit").toggle();
                    $(".add-new").removeAttr("disabled");
                }
            });
            // Edit row on edit button click
            $(document).on("click", ".edit", function(){
                $(this).parents("tr").find("td:not(:last-child)").each(function(){
                    $(this).html('<input type="text" class="form-control" value="' + $(this).text() + '">');
                });
                $(this).parents("tr").find(".add, .edit").toggle();
                $(".add-new").attr("disabled", "disabled");
            });
            // Delete row on delete button click
            $(document).on("click", ".delete", function(){
                $(this).parents("tr").remove();
                $(".add-new").removeAttr("disabled");
            });
        });
    </script>
    <style>
        .breadcrumb-item.active {
            color: #000000;
        }
        body {
            background-color: #edeeef;
        }
    </style>
</head>
<body class="container">
<nav style="--bs-breadcrumb-divider: '>'; background-color: #75AF26;" aria-label="breadcrumb" class="align-self-center d-flex p-2">
    <ol class="breadcrumb col-10 navbar-brand">
        <li class="breadcrumb-item" style="padding-left: 0rem;"><a href="/" class="navbar-brand"><i class="fas fa-users"></i></a></li>
        <li class="breadcrumb-item active" style="padding-left: 0rem;" id="gpname" aria-current="page">{{.Gpname}}</li>
    </ol>
    <div class="btn-group-sm text-end" role="group">
        <a href="/add?name={{.Gpname}}" class="align-self-center btn-link"><i class="fas fa-plus-circle"></i></a>
    </div>
</nav>
<div class="d-flex align-items-start">
    <div class="col-3" style="overflow-y: auto; height: 85vh;">
    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    {{range .Rules}}
        <button class="nav-link text-start" id="v-pills-{{.Name}}-tab" data-bs-toggle="pill" data-bs-target="#v-pills-{{.Name}}" type="button" role="tab" aria-controls="v-pills-{{.Name}}" aria-selected="true">
        {{.DisplayName}}</button>
    {{end}}
    </div>
</div>
    <div class="tab-content container" id="v-pills-tabContent">
    {{range .Rules}}
        <div class="tab-pane fade show" id="v-pills-{{.Name}}" role="tabpanel" aria-labelledby="v-pills-{{.Name}}-tab">
            <p><h2>{{.DisplayName}}</h2></p>
    <p>Class: {{.Class}}</p>
    <p>Category: {{.Category}}</p>
    <p>Supported on: {{.SupportedOn}}</p>
    <p>
    <button class="btn btn-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
        Опис
    </button>
    </p>
    <div class="collapse" id="collapseExample">
        <div class="card card-body">
            {{.ExplainText}}
        </div>
    </div>
    <div >
        {{range .Values}}
            {{if ne .DisabledValue ""}}
        <div class="form-check">
            <input class="form-check-input" type="radio" name="enable-disable-{{.ValueName}}" value="{{.EnabledValue}}" id="enable-disable-{{.ValueName}}">
            <label class="form-check-label" for="enable-disable-{{.ValueName}}">
                Enabled
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="enable-disable-{{.ValueName}}" value="{{.DisabledValue}}" id="enable-disable-{{.ValueName}}">
            <label class="form-check-label" for="enable-disable-{{.ValueName}}">
                Disabled
            </label>
        </div>
            {{end}}
            {{if ne .TrueValue ""}}
        <div class="form-check">
            <input class="form-check-input" type="radio" name="true-false-{{.ValueName}}" value="{{.TrueValue}}" id="true-false-{{.ValueName}}">
            <label class="form-check-label" for="true-false-{{.ValueName}}">
                True
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input" type="radio" name="true-false-{{.ValueName}}" value="{{.FalseValue}}" id="true-false-{{.ValueName}}">
            <label class="form-check-label" for="true-false-{{.ValueName}}">
                False
            </label>
        </div>
            {{end}}
            {{if and (eq .Dublicate 1) (ne .Value "") }}
        <input hidden id="dublval-{{.ValueName}}" value="{{.Value}}">
        <input hidden id="dubldn-{{.ValueName}}" value="{{.DisplayName}}">
        <div>
            <select id="gpvalues-{{.ValueName}}" class="form-select" aria-label="Default select example">
                <option value="" disabled="" selected="">Виберіть значення</option>
            </select>
        </div>
        <script>
            $(document).ready(function() {
                var vals = $("#dublval-{{.ValueName}}").val().split("|");
                var dnames = $("#dubldn-{{.ValueName}}").val().split("|");
                for (let [i, val] of vals.entries()) {
                    $("#gpvalues-{{.ValueName}}").append(new Option(dnames[i], val));
                }
            })
        </script>
            {{ else }}
        <p id="dname">{{.DisplayName}}</p>
            {{if eq .ValueName "manual "}}
        <!--<div class="input-group">
            <span class="input-group-text">Ім'я, значення і опис</span>
            <input type="text" aria-label="ValueName" class="form-control" id="manualv_text" inputmode="text" placeholder="Ім'я значення">
            <input type="text" aria-label="Value" class="form-control" id="manualvn_text" inputmode="text" placeholder="Значення">
            <input type="text" aria-label="Info" class="form-control" id="manuali_text" inputmode="text" placeholder="Опис">
        </div>-->
                <table class="table table-sm">
                    <thead>
                    <tr>
                        <th>ім'я</th>
                        <th>значення</th>
                        <th>дії</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td></td>
                        <td></td>
                        <td>
                            <a class="add" title="Add" data-toggle="tooltip"><i class="fas fa-plus"></i></a>
                            <a class="edit" title="Edit" data-toggle="tooltip"><i class="fas fa-edit"></i></a>
                            <a class="delete" title="Delete" data-toggle="tooltip"><i class="fas fa-trash"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
                    <div>
                        <button type="button" class="btn btn-primary add-new"><i class="fa fa-plus"></i></button>
                    </div>

            {{else}}
            {{if eq .Type "REG_SZ"}}
        <input type="text" id="{{.ValueName}}_text" inputmode="text" placeholder="{{.ValueName}}" />
            {{end}}
            {{if and (eq .Type "REG_DWORD") (eq .DisabledValue "")}}
        <input type="number" id="{{.ValueName}}_number" inputmode="numeric" placeholder="{{.ValueName}}" />
            {{end}}
            {{if eq .Type "REG_MULTISZ"}}
        <textarea rows = "5" cols = "60" name = "{{.ValueName}}_multiline" id="{{.ValueName}}_multiline">
                {{.ValueName}}
            </textarea>
            {{end}}
            {{if eq .Type "REG_QWORD"}}
        <input type="text" id="{{.ValueName}}_bin" inputmode="text" placeholder="{{.ValueName}}" />
            {{end}}
        {{end}}
        {{end}}
        <p></p>
        <div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="DELETE" id="flexCheckOne">
                <label class="form-check-label" for="flexCheckOne">
                    видалити значення?
                </label>
            </div>
        </div>
    {{end}}
    </div>
            <p>
            <hr>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="DELETEALLVALUES" id="flexCheckAll">
                <label class="form-check-label" for="flexCheckAll">
                    видалити всі значення?
                </label>
            </div>
            </p>
            <p>
                <a class="btn btn-success" id="savebtn" href=""><i class="fas fa-save"></i></a>
                <a class="btn btn-primary" id="copybtn" href=""><i class="fas fa-copy"></i></a>
                <a class="btn btn-danger" id="deletebtn" href=""><i class="fas fa-trash"></i></a>
            </p>
            <script>
                var gpname = document.getElementById("gpname").innerText;
                console.log(gpname);
                $(document).onclick(function() {
                    $("#savebtn").attr("href", "/save?id={{.ID}}&gpname=" + gpname);
                    $("#copybtn").attr("href", "/copy?id={{.ID}}&gpname=" + gpname);
                    $("#deletebtn").attr("href", "/delete?id={{.ID}}&gpname=" + gpname);
                });
            </script>
    </div>
{{end}}
    </div>
    </div>
</body>
</html>

{{end}}